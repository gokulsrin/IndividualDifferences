<html>

<head>
    <title>Modality Study</title>
    <script type="text/javascript" src="vignettes.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-categorize-html.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-image-button-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-html-form.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-multi-select.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-text.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <script type="text/javascript" src="vignettes.js"></script>
    <script src = "//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type = "text/javascript"></script>
    <script.src = 'https://code.jquery.com/jquery-3.4.1.min.js'></script>
</head>

<body></body>
<script>
    /* create timeline */
    var timeline = [];

    //Global variables
    VIGNETTE_AMOUNT = 6;
    var q_array = jsPsych.randomization.sampleWithoutReplacement([vignettes.Heinz, vignettes.Brian, vignettes.Josh, vignettes.Mary, vignettes.Liz, vignettes.Brad], VIGNETTE_AMOUNT);
    var shuffled_modal = jsPsych.randomization.sampleWithoutReplacement(["improbable", "immoral", "irrational", "possible", "impossible"], 5)[0];
    q_i = 0;
    //Might need to fix the shuffled_q randomization code
    var shuffled_q = jsPsych.randomization.sampleWithoutReplacement([],24);
    var psychopathy_options = ["True", "Somewhat True", "Somewhat Fale", "False"];
	var empathy_options = ["1", "2", "3", "4", "5"];
	var bai_options = ["Not at all", "Mildly, but it didn’t bother me much", "Moderately – it wasn’t pleasant at times", "Severely – it bothered me a lot"];
	var crt_options1 = jsPsych.randomization.sampleWithoutReplacement(["1 cent", "5 cents", "9 cents", "10 cents"]);
	var crt_options2 = jsPsych.randomization.sampleWithoutReplacement(["5 minutes", "20 minutes", "100 minutes", "500 minutes"]);
	var crt_options3 = jsPsych.randomization.sampleWithoutReplacement(["12 days", "24 days", "36 days", "47 days"]);
	var crt_options4 = jsPsych.randomization.sampleWithoutReplacement(["3 days", "4 days", "9 days", "12 days"]);
	var crt_options5 = jsPsych.randomization.sampleWithoutReplacement(["1 student", "15 students", "29 students", "30 students"]);
	var crt_options6 = jsPsych.randomization.sampleWithoutReplacement(["$0", "$10", "$20", "$30"]);
	var crt_options7 = ["has lost money.", "has broken even in the stock market.", "is ahead of where he began.", "it cannot be determined."];
	
    //function to move to the next vignette
    function next_vign() {
        if (q_i == VIGNETTE_AMOUNT) {
            return false;
        }
        q_array[q_i].possible.forEach(element => shuffled_q.push(element));
        q_array[q_i].impossible.forEach(element => shuffled_q.push(element));
        q_array[q_i][shuffled_modal].forEach(element => shuffled_q.push(element));
        shuffled_q = jsPsych.randomization.sampleWithoutReplacement(shuffled_q);
    }

    //-------------------------OPENING INSTRUCTIONS-------------------------------

    /* Consent form for the study*/
    var consent = {
        type: 'html-button-response',
        stimulus: "<DIV align='left'><div>&nbsp;</div><div>Please consider this information carefully before deciding whether to participate in this research.</div><div>&nbsp;</div><div>The purpose of this research is to examine which factors influence social judgment and decision-</div><div>making. You will be asked to make judgements about individuals and actions in social scenarios.</div><div>We are simply interested in your judgement. The study will take less than 1 hour to complete,</div><div>and you will receive less than $20 on Amazon Mechanical Turk. Your compensation and time</div><div>commitment are specified in the study description. There are no anticipated risks associated with</div><div>participating in this study. The effects of participating should be comparable to those you would</div><div>ordinarily experience from viewing a computer monitor and using a mouse or keyboard for a</div><div>similar amount of time. At the end of the study, we will provide an explanation of the questions</div><div>that motivate this line of research and will describe the potential implications.</div><div>&nbsp;</div><div>Your participation in this study is completely voluntary and you may refuse to participate or you</div><div>may choose to withdraw at any time without penalty or loss of benefits to you which are</div><div>otherwise entitled. Your participation in this study will remain confidential. No personally</div><div>identifiable information will be associated with your data. Also, all analyses of the data will be</div><div>averaged across all the participants, so your individual responses will never be specifically</div><div>analyzed.</div><div>&nbsp;</div><div>If you have questions or concerns about your participation or payment, or want to request a</div><div>summary of research findings, please contact Dr. Jonathan Phillips at</div><div><a href=mailto:Jonathan.S.Phillips@dartmouth.edu>Jonathan.S.Phillips@dartmouth.edu</a>.</div><div>&nbsp;</div><div>Please save a copy of this form for your records.</div><div>&nbsp;</div></DIV><div>Agreement:</div><DIV align='left'><div>The nature and purpose of this research have been sufficiently explained and I agree to</div><div>participate in this study. I understand that I am free to withdraw at any time without incurring</div><div>any penalty. Please consent by clicking the button below to continue. Otherwise, please exit the</div><div>study at any time.</div><div>&nbsp;</div></DIV>",
        choices: ["Continue"],
        prompt: "<p>Press 'Continue' to agree to the study.</p>",
        response_ends_trial: true
    };
    timeline.push(consent);

    /* Collection of participant info*/
    var participant_info = {
        type: 'survey-text',
        preamble: ["Please enter your Amazon Mechanical Turk Worker ID below.<br><br>If you do not enter your ID accurately, we will not be able to pay you."],
        questions: [{prompt: "Worker ID:", name: "subject_id", required: true}],
        }
    timeline.push(participant_info);

    var demo1 = {
        type: 'survey-text',
        preamble: 'Please provide us with some demographic information.',
        questions: [{prompt: "How old are you?", required: true}, {prompt: "What is your native language?", required: true}, {prompt: "What is your nationality?", required: true}, {prompt: "In which country do you live?", required: true}],
        };
    timeline.push(demo1);

    var demo2 = {
        type: 'survey-multi-choice',
        preamble: "Please provide us with some demographic information.",
        questions: [
            {prompt: "What is your gender?", options: ["Male","Female","Other"], required:true},
            {prompt: "Are you right or left handed?", options: ["Right-handed","Left-handed","Ambidextrous"], required:true},
            {prompt: "What is your education level?", options: ["Grade/elementary school","High school","Some college or university","College or university degree","Graduate degree, Masters","PhD"], required: true}
        ]
    };
    timeline.push(demo2);

    /* define instructions trial */
    var instructions = {
        type: "html-keyboard-response",
        stimulus: "<h2> Instructions</h2>" +
            "<p>In this study, we'd like you to make judgments about whether something is possible or impossible. To indicate that something " +
            "is possible, please press the [f] key; to indicate that something is impossible, please press the [j] key. To get you used to this, " +
            "you will first go through a warm-up phase. On these trials, press [f] if you see the word 'Possible' and [j] if you see the word " +
            "'Impossible.'' ***Please take your time and answer as correctly as possible.*** </p>" +
            "<p>Press any key to continue</p>",
    };
    timeline.push(instructions);

    //-------------------------FAMILIARIZATION TRIAL-------------------------------

    //possible choices to categorize/train subject to hit the right keys
    var test_stimuli = [{
        stimulus: "Possible",
        correct_ans: 70,
        correct_response: 'F',
        data: {
            test_part: 'test',
            correct_response: 'F'
        }
    }, {
        stimulus: "Impossible",
        correct_ans: 74,
        correct_response: 'J',
        data: {
            test_part: 'test',
            correct_response: 'J'
        }
    }];

    //training trial to familiarize subject with hitting the right keys
    var training = {
        type: 'categorize-html',
        stimulus: jsPsych.timelineVariable('stimulus'),
        key_answer: jsPsych.timelineVariable('correct_ans'),
        text_answer: jsPsych.timelineVariable('stimulus'),
        choices: [70, 74],
        correct_text: "<p class='prompt'>Correct, keep going.</p>",
        incorrect_text: function() {
            var html = "<p class='prompt'>That's not right %ANS% is [ " + jsPsych.timelineVariable('correct_response')() + " ] .</p> <p>Please slow down and answer correctly.</p>";
            return html;
        },
        prompt: "<p>Remember: press [f] for possible and [j] for impossible </p>",
    }

    var learning_trial = {
        timeline: [training],
        timeline_variables: test_stimuli,
        randomize_order: true,
        repetitions: 10, 
    }
    timeline.push(learning_trial);

    //-------------------------TRIAL BEGINS HERE-------------------------------

    //actual testing begins here
    var vignette_instructions = {
        type: "html-keyboard-response",
        stimulus: "<h2>In this part, you will read a story and then will be judging whether certain events are possible or impossible.</h2> <p>***Please answer as quickly and accurately as you possibly can. You will only have about 1 second to respond to each event.***</p> <p>Press any key to continue</p>",
    }
    timeline.push(vignette_instructions);

    //trial that shuffles through all modal options
    //this one is for the 1150ms trials
    choices_slow = {
        type: 'html-keyboard-response',
        trial_duration: 1150,
        stimulus: function() {
            return shuffled_q[0];
        },
        choices: [70, 74],
        on_finish: function(data) {
            data.modal_type = shuffled_modal;
            if (data.key_press == 70) {
                data.answered = "possible";
            }
            else if (data.key_press == 74) {
                data.answered = "impossible";
            }
            else {
                data.answered = "null";
            }
        }
    }
    
    //this one is for the 750ms trials
    choices_fast = {
        type: 'html-keyboard-response',
        trial_duration: 750,
        stimulus: function() {
            return shuffled_q[0];
        },
        choices: [70, 74],
        on_finish: function(data) {
            data.modal_type = shuffled_modal;
            if (data.key_press == 70) {
                data.answered = "possible";
            }
            else if (data.key_press == 74) {
                data.answered = "impossible";
            }
            else {
                data.answered = "null";
            }
        }
    }

    //instructions prior to modal questions
    var instruct = {
        type: 'instructions',
        pages: function() {
            next_vign();
            var story = "<h1>Please read the following story</h1> <br>" + q_array[q_i].vignette + "<br><br>" + q_array[q_i].prompt;
            var instruct = "<h1>Given " + q_array[q_i].name + "'s situation, please tell us whether it is possible or impossible for " + q_array[q_i].name + " to do the following things.</h1> <br>press [next] when you are ready to begin. *** Remember, this will go very quickly!***";
            return [story, instruct];
        },
        show_clickable_nav: true
    }

    //short pause between each stimulus
    var pause = {
        type: 'html-keyboard-response',
        stimulus: "",
        choices: jsPsych.NO_KEYS,
        trial_duration: 500,
    }

    //each individual stimulus for the possible things people can do
    //this one uses 750ms trials
    var modalq_fast = {
        timeline: [choices_fast, pause],
        loop_function: function(data) {
            if (shuffled_q.length != 1) {
                shuffled_q.shift();
                return true;
            } else {
                q_i++;
                next_vign();
                return false;
            }
        }
    }
    //this one uses 1150ms trials
    var modalq_slow = {
        timeline: [choices_slow, pause],
        loop_function: function(data) {
            if (shuffled_q.length != 1) {
                shuffled_q.shift();
                return true;
            } else {
                q_i++;
                next_vign();
                return false;
            }
        }
    }

    //generates a random integer between min and max inclusive
    function getRndInteger(min, max) {
        return Math.floor(Math.random() * (max - min + 1) ) + min;
    }
    
    //adds each prompt/vignette to the timeline
    function timeline_pusher() {
        var order = getRndInteger(0,1);
        for (var i = 0; i < VIGNETTE_AMOUNT; i++) {
            timeline.push(instruct);
            if (order==0){
                if (i<3){
                    timeline.push(modalq_slow);
                } else {
                timeline.push(modalq_fast); 
                }
            } else{
                if (i<3){
                    timeline.push(modalq_fast);
                } else {
                timeline.push(modalq_slow); 
                }
            }
        }
    }
    timeline_pusher();


	var crt = {
        type: 'survey-multi-choice',
        preamble: "<br><br>You will see on this page several items that vary in difficulty. Answer as many as you can.",
        questions: [{
            prompt: "A bat and a ball cost $1.10 in total. The bat costs $1.00 more than the ball. How much does the ball cost?",
            name: 'crt_1',
            options: crt_options1,
            required: true,
            horizontal: true
        }, {
            prompt: "If it takes 5 machines 5 minutes to make 5 widgets, how long would it take 100 machines to make 100 widgets?",
            name: 'crt_2',
            options: crt_options2,
            required: true,
            horizontal: true
        }, {
            prompt: "In a lake, there is a patch of lily pads. Every day, the patch doubles in size. If it takes 48 days for the patch to cover the entire lake, how long would it take for the patch to cover half of the lake?",
            name: 'crt_3',
            options: crt_options3,
            required: true,
            horizontal: true
        }, {
            prompt: "If John can drink one barrel of water in 6 days, and Mary can drink one barrel of water in 12 days, how long would it take them to drink one barrel of water together?",
            name: 'crt_4',
            options: crt_options4,
            required: true,
            horizontal: true
        }, {
            prompt: "Jerry received both the 15th highest and the 15th lowest mark in the class. How many students are in the class?",
            name: 'crt_5',
            options: crt_options5,
            required: true,
            horizontal: true
        }, {
            prompt: "A man buys a pig for $60, sells it for $70, buys it back for $80, and sells it finally for $90. How much has he made?",
            name: 'crt_6',
            options: crt_options6,
            required: true,
            horizontal: true
        }, {
            prompt: "Simon decided to invest $8,000 in the stock market one day early in 2008. Six months after he invested, on July 17, the stocks he had purchased were down 50%. Fortunately for Simon, from July 17 to October 17, the stocks he had purchased went up 75%. At this point, Simon:",
            name: 'crt_7',
            options: crt_options7,
            required: true,
            horizontal: true
        }, ]
    }
    timeline.push(crt);

    var bai = {
        type: 'survey-multi-choice',
        preamble: "<br><br>Below is a list of common symptoms of anxiety. Please carefully read each item in the list. Indicate how much you have been bothered by that symptom during the past month, including today, by circling the number in the corresponding space in the column next to each symptom.",
        questions: [{
            prompt: "Numbness or tingling",
            name: 'bai_1',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Feeling hot",
            name: 'bai_2',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Wobbliness in legs",
            name: 'bai_3',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Unable to relax",
            name: 'bai_4',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Fear of worst happening",
            name: 'bai_5',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Dizzy or lightheaded",
            name: 'bai_6',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Heart pounding/racing",
            name: 'bai_7',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Unsteady",
            name: 'bai_8',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Terrified or afraid",
            name: 'bai_9',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Nervous",
            name: 'bai_10',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Feeling of choking",
            name: 'bai_11',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Hands trembling",
            name: 'bai_12',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Shaky/unsteady",
            name: 'bai_13',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Fear of losing control",
            name: 'bai_14',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Difficulty in breathing",
            name: 'bai_15',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Fear of dying",
            name: 'bai_16',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Scared",
            name: 'bai_17',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Indigestion",
            name: 'bai_18',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Faint/lightheaded",
            name: 'bai_19',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Face flushed",
            name: 'bai_20',
            options: bai_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Hot/cold sweats",
            name: 'bai_21',
            options: bai_options,
            required: true,
            horizontal: true
        }, ]
    }
    timeline.push(bai);

    var psychopathy = {
        type: 'survey-multi-choice',
        preamble: "<br><br>This questionnaire contains statements that different people might use to describe themselves. For each statement, select the choice that describes you best. There are no right or wrong answers; just choose the answer that best describes you. Answer all of the items. Please work rapidly and do not spend too much time on any one statement.",
        questions: [{
            prompt: "How other people feel is important to me.",
            name: 'TriPM_1',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I often act on immediate needs.",
            name: 'TriPM_2',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I've often missed things I promised to attend.",
            name: 'TriPM_3',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I would enjoy being in a high-speed chase.",
            name: 'TriPM_4',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I don’t mind if someone I dislike gets hurt.",
            name: 'TriPM_5',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "My impulsive decisions have caused problems with loved ones.",
            name: 'TriPM_6',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I sympathize with others’ problems.",
            name: 'TriPM_7',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I have missed work without bothering to call in.",
            name: 'TriPM_8',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I enjoy a good physical fight.",
            name: 'TriPM_9',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I jump into things without thinking.",
            name: 'TriPM_10',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I return insults.",
            name: 'TriPM_11',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I've gotten in trouble because I missed too much school.",
            name: 'TriPM_12',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "It doesn’t bother me to see someone else in pain.",
            name: 'TriPM_13',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {prompt: "I have good control over myself.",
            name: 'TriPM_14',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I enjoy pushing people around sometimes.",
            name: 'TriPM_15',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have taken money from someone's purse or wallet without asking.",
            name: 'TriPM_16',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I taunt people just to stir things up.",
            name: 'TriPM_17',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "People often abuse my trust.",
            name: 'TriPM_18',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I don't see any point in worrying if what I do hurts someone else.",
            name: 'TriPM_19',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I keep appointments I make.",
            name: 'TriPM_20',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I often get bored quickly and lose interest.",
            name: 'TriPM_21',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I am sensitive to the feelings of others.",
            name: 'TriPM_22',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have conned people to get money from them.",
            name: 'TriPM_23',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I don't have much sympathy for people.",
            name: 'TriPM_24',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I get in trouble for not considering the consequences of my actions.",
            name: 'TriPM_25',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "For me, honesty really is the best policy.",
            name: 'TriPM_26',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I've injured people to see them in pain.",
            name: 'TriPM_27',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I sometimes insult people on purpose to get a reaction from them. ",
            name: 'TriPM_28',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have taken items from a store without paying for them. ",
            name: 'TriPM_29',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "Things are more fun if a little danger is involved.",
            name: 'TriPM_30',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have a hard time waiting patiently for things I want.",
            name: 'TriPM_31',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I don't care much if what I do hurts others.",
            name: 'TriPM_32',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have lost a friend because of irresponsible things I've done.",
            name: 'TriPM_33',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "Others have told me they are concerned about my lack of self-control.",
            name: 'TriPM_34',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "It’s easy for me to relate to other people’s emotions.",
            name: 'TriPM_35',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have robbed someone.",
            name: 'TriPM_36',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "It doesn’t bother me when people around me are hurting.",
            name: 'TriPM_37',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
        	prompt: "I have had problems at work because I was irresponsible.",
            name: 'TriPM_38',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I have stolen something out of a vehicle.",
            name: 'TriPM_39',
            options: psychopathy_options,
            required: true,
            horizontal: true
        }, ]
    }
    timeline.push(psychopathy);


var empathy = {
        type: 'survey-multi-choice',
        preamble: "<br><br>Please answer the questions below on a scale from 1 (does not describe me at all) to 5 (describes me very well)",
        questions: [{
            prompt: "I often have tender, concerned feelings for people less fortunate than me.",
            name: 'IRI_1',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I really get involved with the feelings of the characters in a novel.",
            name: 'IRI_2',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: " In emergency situations, I feel apprehensive and ill-at-ease.",
            name: 'IRI_3',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I try to look at everybody’s side of a disagreement before I make a decision.",
            name: 'IRI_4',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I see someone being taken advantage of, I feel kind of protective toward them.",
            name: 'IRI_5',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I sometimes try to understand my friends better by imagining how things look from their perspective.",
            name: 'IRI_6',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "After seeing a play or movie, I have felt as though I were one of the characters.",
            name: 'IRI_7',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Being in a tense emotional situation scares me.",
            name: 'IRI_8',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I see someone being treated unfairly, I feel very much pity for them.",
            name: 'IRI_9',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I would describe myself as a pretty soft-hearted person.",
            name: 'IRI_10',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I watch a good movie, I can very easily put myself in the place of a leading character.",
            name: 'IRI_11',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "I tend to lose control during emergencies.",
            name: 'IRI_12',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I’m upset at someone, I usually try to “put myself in his shoes” for a while.",
            name: 'IRI_13',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I am reading an interesting story or novel, I imagine how I would feel if the events in the story were happening to me.",
            name: 'IRI_14',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "When I see someone who badly needs help in an emergency, I go to pieces.",
            name: 'IRI_15',
            options: empathy_options,
            required: true,
            horizontal: true
        }, {
            prompt: "Before criticizing somebody, I try to imagine how I would feel if I were in their place.",
            name: 'IRI_16',
            options: empathy_options,
            required: true,
            horizontal: true
        }, ]
    }
    timeline.push(empathy);

    var debrief = {
        type: "html-keyboard-response",
        stimulus: "<DIV align='left'><div>&nbsp;</div><div><strong>Study Debriefing</strong></div><div>Judgement and decision making are important aspects of public and private life. Using surveys</div><div>like the one you just completed, we are examining the factors that go into making social</div><div>decisions.</div><div>&nbsp;</div><div><strong>How is this being tested?</strong></div><div>We have asked you to respond to stories or videos that differ on several important factors. By</div><div>isolating different variables that are involved in social thought, we can better understand how we</div><div>arrive at complex decision-making. For example, some actions are seen as more worthy of blame</div><div>if they are performed intentionally. Harming someone on purpose is generally worse than</div><div>harming someone by accident, or even harming someone in a way that is foreseen but not</div><div>intended.</div><div>&nbsp;</div><div><strong>Main questions and hypotheses:</strong></div><div>A fundamental goal of our research is to understand the cognitive and emotional factors that</div><div>influence social judgment and decision-making. We are studying these factors by presenting</div><div>people with hypothetical questions that vary in specific ways and seeing which factors make a</div><div>difference. Some people filled out the same survey that you just filled out. Others got slightly</div><div>different surveys.</div><div>&nbsp;</div><div><strong>Why is this important to study?</strong></div><div>By comparing answers on these important factors, we learn about what factors affect social</div><div>judgment. This has crucial implications for many public domains, including the legal system.</div><div>&nbsp;</div><div><strong>How to learn more:</strong></div><div>If you are interested in learning more, you may want to consult the following articles:</div><div>Phillips, J., &amp; Cushman, F. (2017). Morality constrains the default representation of what is</div><div style='padding-left: 30px;'>possible. Proceedings of the National Academy of Sciences of the United States of</div><div style='padding-left: 30px;'>America, 114(18), 4649&ndash;4654. https://doi.org/10.1073/pnas.1619717114</div><div>Phillips, J., Morris, A., &amp; Cushman, F. (2019). How we know what not to think.</div><div style='padding-left: 30px;'>Trends in Cognitive Sciences, 23(12), 1026&ndash;1040. https://doi.org/10.1016/j.tics.2019.09.007</div><div>Phillips, J., Buckwalter, W., Cushman, F., Friedman, O., Martin, A., Turri, J., Santos, L., &amp;</div><div style='padding-left: 30px;'>Knobe, J. (2020). Knowledge before Belief. Behavioral and Brain Sciences, 1-37.</div><div style='padding-left: 30px;'>doi:10.1017/S0140525X20000618</div><div>&nbsp;</div><div><strong>How to contact the researcher:</strong></div><div>If you have questions or concerns about your participation or</div><div>payment, or want to request a summary of research findings, please contact the Primary</div><div>Investigator: Dr. Jonathan Phillips, at Jonathan.S.Phillips@dartmouth.edu.</div><div>Whom to contact about your rights in this research:</div><div>If you have questions, concerns,</div><div>complaints, or suggestions about the present research, you may call the Office of the Committee</div><div>for the Protection of Human Subjects at Dartmouth College (603) 646-6482 during normal</div><div>business hours.</div><div>&nbsp;</div><div><strong>Thank you for your participation!</strong></div><div>&nbsp;</div></DIV>",
    };
    timeline.push(debrief);
        //type: "html-keyboard-response",
        // stimulus: function() {

        //     var trials = jsPsych.data.get().filter({
        //         test_part: 'test'
        //     });
        //     var correct_trials = trials.filter({
        //         correct: true
        //     });
        //     var accuracy = Math.round(correct_trials.count() / trials.count() * 100);
        //     var rt = Math.round(correct_trials.select('rt').mean());

        

    /* start the experiment */
    jsPsych.init({
        timeline: timeline,
        on_finish: function() {
            jsPsych.data.displayData();
        }
    });


    function save_data(data) {
        url = location+"data"
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
            data
        }));
    }

    //run
    jsPsych.init({
        timeline,
        on_finish: function() {
            jsPsych.data.displayData();
            save_data(jsPsych.data.get().values());
        }
    })

    </script>
</html>